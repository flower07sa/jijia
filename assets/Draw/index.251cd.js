window.__require=function t(e,n,r){function o(a,c){if(!n[a]){if(!e[a]){var p=a.split("/");if(p=p[p.length-1],!e[p]){var _="function"==typeof __require&&__require;if(!c&&_)return _(p,!0);if(i)return i(p,!0);throw new Error("Cannot find module '"+a+"'")}a=p}var d=n[a]={exports:{}};e[a][0].call(d.exports,function(t){return o(e[a][1][t]||t)},d,d.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<r.length;a++)o(r[a]);return o}({Draw:[function(t,e,n){"use strict";cc._RF.push(e,"6b6bcQhUJpLSZEYx7Z8qinI","Draw");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__decorate||function(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(o=t[c])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)};Object.defineProperty(n,"__esModule",{value:!0});var c=t("../Apply/Apply"),p=t("../Apply/audio_mgr"),_=t("../Apply/Data"),d=t("../Framework/View/ViewZOrder"),u=t("../Start/Start"),f=cc._decorator,l=f.ccclass,y=(f.property,lw._decorator.metadata),s=function(t){function e(){var e=t.call(this)||this;return e._autoBind=!0,e._draw1=null,e._drag=null,e._grap_graph=null,e._energy=null,e._lab_ene=null,e._draw=null,e._grap_draw=null,e._btn_clear=null,e._btn_close=null,e._btn_start=null,e.ink_max=150,e.ink_num=0,e.draw_pint=[],e.LayerOrder=d.ViewZOrder.Draw,e}var n,r,f,s,h,g,w,v,b,m,k;return o(e,t),n=e,e.prototype.init=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];n.instance=this,this.initPro(),this.loadeDrag()},e.prototype.loadeDrag=function(){var t=this._drag.getComponent(dragonBones.ArmatureDisplay),e=_.default.warehouse[201].SKIN.now+1;_.default.warehouse[201].SKIN.trial&&(e=_.default.warehouse[201].SKIN.trial);var n="Sprite/DragonBones/player"+e;c.default.loadDragonBones(t,"Start",n,function(){t.armatureName="armatureName",t.playAnimation("run",0)})},e.prototype._initUI=function(){},Object.defineProperty(e.prototype,"dragFun",{get:function(){return this._drag},enumerable:!1,configurable:!0}),e.prototype._initEvent=function(){var t=this,e=cc.v2(0,0);this._draw.on(cc.Node.EventType.TOUCH_START,function(n){if(!(t.ink_num<=0)){var r=cc.v2(n.getLocation().x,n.getLocation().y),o=c.default.worldConvertLocalPointAR(t._draw,r);t._grap_draw.moveTo(o.x,o.y),t._grap_graph.moveTo(o.x,o.y),e.x=o.x,e.y=o.y,t.draw_pint.push(e)}}),this._draw.on(cc.Node.EventType.TOUCH_MOVE,function(n){if(!(t.ink_num<=0)){var r=cc.v2(n.getLocation().x,n.getLocation().y),o=c.default.worldConvertLocalPointAR(t._draw,r),i=!0;o.x>-t._draw.width/2&&o.x<t._draw.width/2&&(e.x=o.x,i=!1),o.y>-t._draw.height/2&&o.y<t._draw.height/2&&(e.y=o.y,i=!1),i||(t.ink_num-=1,t._energy.height=t._energy.parent.height*t.ink_num/t.ink_max,t._lab_ene.string=Math.floor(t.ink_num/t.ink_max*100).toString()+"%",t.ink_num/t.ink_max<.7&&(t._btn_start.interactable=!0),t._grap_draw.lineTo(e.x,e.y),t._grap_graph.lineTo(e.x,e.y),t._grap_draw.stroke(),t._grap_graph.stroke(),t.draw_pint.push(e))}}),this._btn_start.node.on(cc.Node.EventType.TOUCH_END,function(){t._btn_start.interactable&&(u.default.instance.node.active=!1,t.node.active=!1,lw.viewMgr.open(_.Game_inter.Game))})},e.prototype.onClose=function(){},e.prototype.onEnable=function(){this._energy&&(this.initPro(),this._grap_draw.clear(),this._grap_graph.clear(),this._btn_start.interactable=!1,this.loadeDrag())},e.prototype.clickBtnClear=function(){p.default.playEffect(p.SfxType.kclick),this._grap_draw.clear(),this._grap_graph.clear(),this.initPro()},e.prototype.clickBtnClose=function(){p.default.playEffect(p.SfxType.kclick),this.node.active=!1},e.prototype.dragBack=function(){this._drag.parent=this._draw1,this._drag.scaleX=1,this._drag.scaleY=1},e.prototype.initPro=function(){this._btn_start.interactable=!1,this.ink_num=this.ink_max,this._energy.height=this._energy.parent.height*this.ink_num/this.ink_max,this._lab_ene.string=Math.floor(this.ink_num/this.ink_max*100).toString()+"%"},e.instance=null,i([y("cc.Node"),a("design:type","function"==typeof(r="undefined"!=typeof cc&&cc.Node)?r:Object)],e.prototype,"_draw1",void 0),i([y("cc.Node"),a("design:type","function"==typeof(f="undefined"!=typeof cc&&cc.Node)?f:Object)],e.prototype,"_drag",void 0),i([y("cc.Graphics"),a("design:type","function"==typeof(s="undefined"!=typeof cc&&cc.Graphics)?s:Object)],e.prototype,"_grap_graph",void 0),i([y("cc.Node"),a("design:type","function"==typeof(h="undefined"!=typeof cc&&cc.Node)?h:Object)],e.prototype,"_energy",void 0),i([y("cc.Label"),a("design:type","function"==typeof(g="undefined"!=typeof cc&&cc.Label)?g:Object)],e.prototype,"_lab_ene",void 0),i([y("cc.Node"),a("design:type","function"==typeof(w="undefined"!=typeof cc&&cc.Node)?w:Object)],e.prototype,"_draw",void 0),i([y("cc.Graphics"),a("design:type","function"==typeof(v="undefined"!=typeof cc&&cc.Graphics)?v:Object)],e.prototype,"_grap_draw",void 0),i([y("cc.Button"),a("design:type","function"==typeof(b="undefined"!=typeof cc&&cc.Button)?b:Object)],e.prototype,"_btn_clear",void 0),i([y("cc.Button"),a("design:type","function"==typeof(m="undefined"!=typeof cc&&cc.Button)?m:Object)],e.prototype,"_btn_close",void 0),i([y("cc.Button"),a("design:type","function"==typeof(k="undefined"!=typeof cc&&cc.Button)?k:Object)],e.prototype,"_btn_start",void 0),n=i([l,a("design:paramtypes",[])],e)}(lw.BaseView);n.default=s,cc._RF.pop()},{"../Apply/Apply":void 0,"../Apply/Data":void 0,"../Apply/audio_mgr":void 0,"../Framework/View/ViewZOrder":void 0,"../Start/Start":void 0}]},{},["Draw"]);